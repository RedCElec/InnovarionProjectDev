<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype Web Monitor </title>
</head>
<body>
    <h1>List of request made :</h1>
    <div id="mainDiv" style="white-space: pre-wrap;"></div>

    
    <script>

    let dataToDiv = 'noVariable';
    let counter = 0;
    const divElement = document.getElementById('mainDiv');
    

    const fetcher = ()=>{
    counter++;

    fetch('http://localhost:3000/htmldisplay')
  .then(response => response.text())
  .then(data => {
    console.log(data);

    divElement.textContent = data;
    //console.log(data);
  })
  .catch(error => {
    
    console.error('Error:', error);
  })
        }

    const interval = setInterval(fetcher(), 1000);
    if(counter >19){
        clearInterval(interval);
    }
        
        
    </script>

</body>
</html>